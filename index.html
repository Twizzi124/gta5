<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>GTA 5 RP — Бонуспоинты</title>
  <style>
    body { font-family: Arial, sans-serif; background: #1e1e1e; color: #fff; text-align: center; }
    h1 { margin: 20px 0; }
    .controls { margin: 20px; }
    table { 
      width: 900px; /* фиксированная ширина */
      margin: 20px auto; 
      border-collapse: collapse; 
      background: #2b2b2b; 
      border-radius: 10px; 
      overflow: hidden; 
    }
    th, td { padding: 10px; border: 1px solid #444; }
    th { background: #333; }
    tr.checked { background: #2e7d32 !important; color: #fff; }
    input[type="number"] { width: 50px; text-align: center; }
    .reset-btn { margin-top: 20px; padding: 10px 20px; background: #c62828; border: none; color: white; cursor: pointer; border-radius: 5px; }
    .reset-btn:hover { background: #e53935; }
    h2 { margin-top: 40px; }
  </style>
</head>
<body>
  <h1>GTA 5 RP — Бонуспоинты</h1>

  <div class="controls">
    <label>VIP <input type="checkbox" id="vip"></label>
    <br><br>
    <label>Общее количество BP: <input type="number" id="totalBP" value="0"></label>
    <br><br>
    <button class="reset-btn" id="reset">Отменить всё</button>
  </div>

  <!-- Таблицы -->
  <h2>Одиночные</h2>
  <table id="single">
    <thead><tr><th>Задание</th><th>BP</th><th>✔</th></tr></thead>
    <tbody>
      <tr><td>Арендовать Киностудию (с VIP скидка)</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>Успешная тренировка в тире</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Выиграть в казино (0 или 00)</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>Провести 3 часа в игре</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>20 подходов в спортзале</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Купить лотерейный билет</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Добавить 5 видео в кинотеатр</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
    </tbody>
  </table>

  <h2>Работа</h2>
  <table id="work">
    <thead><tr><th>Задание</th><th>BP</th><th>✔</th></tr></thead>
    <tbody>
      <tr><td>25 действий в порту</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>25 действий на стройке</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>25 действий в шахте</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>Потушить 25 огоньков (пожарный)</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>10 посылок на почте</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>10 действий на ферме</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>2 рейса на автобусе</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
    </tbody>
  </table>

  <h2>Парные</h2>
  <table id="pair">
    <thead><tr><th>Задание</th><th>BP</th><th>✔</th></tr></thead>
    <tbody>
      <tr><td>Выиграть гонку на картинге</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Проехать уличную гонку</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Победить 3 раза в Dance Battle</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>Выиграть 3 игры на Арене Maze Bank</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Выиграть 5 игр в ТК со ставкой</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
    </tbody>
  </table>

  <h2>Crime</h2>
  <table id="crime">
    <thead><tr><th>Задание</th><th>BP</th><th>✔</th></tr></thead>
    <tbody>
      <tr><td>Привезти Хаммер с ВЗХ</td><td><input type="number" value="3"></td><td><input type="checkbox"></td></tr>
      <tr><td>5 доставок контрабанды</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>Взломать 15 замков</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>Закрасить 7 граффити</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
    </tbody>
  </table>

  <h2>Гос</h2>
  <table id="gov">
    <thead><tr><th>Задание</th><th>BP</th><th>✔</th></tr></thead>
    <tbody>
      <tr><td>Выдать 5 медкарт (EMS)</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Закрыть 15 вызовов (EMS)</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
      <tr><td>Арест в КПЗ</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Поставить 2 авто на учёт</td><td><input type="number" value="1"></td><td><input type="checkbox"></td></tr>
      <tr><td>Закрыть 5 вызовов (гос)</td><td><input type="number" value="2"></td><td><input type="checkbox"></td></tr>
    </tbody>
  </table>

  <script>
    const totalBPInput = document.getElementById('totalBP');
    const vipCheckbox = document.getElementById('vip');
    const tables = document.querySelectorAll('table');
    const resetBtn = document.getElementById('reset');

    window.onload = function () {
      totalBPInput.value = localStorage.getItem('totalBP') || 0;
      vipCheckbox.checked = localStorage.getItem('vip') === 'true';

      tables.forEach(table => {
        table.querySelectorAll('tbody tr').forEach((row, index) => {
          const checkbox = row.querySelector('input[type="checkbox"]');
          const bpInput = row.querySelector('input[type="number"]');
          const savedBP = localStorage.getItem('bp_' + table.id + '_' + index);
          const savedChecked = localStorage.getItem('checkbox_' + table.id + '_' + index);

          if (savedBP) bpInput.value = savedBP;
          if (savedChecked === 'true') {
            checkbox.checked = true;
            row.classList.add('checked');
          }

          checkbox.addEventListener('change', function () {
            const wasChecked = localStorage.getItem('checkbox_' + table.id + '_' + index) === 'true';
            if (checkbox.checked && !wasChecked) {
              let total = parseInt(totalBPInput.value) || 0;
              const vipMultiplier = vipCheckbox.checked ? 2 : 1;
              total += (parseInt(bpInput.value) || 0) * vipMultiplier;
              totalBPInput.value = total;
              localStorage.setItem('totalBP', total);
            }
            row.classList.toggle('checked', checkbox.checked);
            localStorage.setItem('checkbox_' + table.id + '_' + index, checkbox.checked);
          });

          bpInput.addEventListener('input', function () {
            localStorage.setItem('bp_' + table.id + '_' + index, bpInput.value);
          });
        });
      });

      vipCheckbox.addEventListener('change', function () {
        localStorage.setItem('vip', vipCheckbox.checked);
      });

      totalBPInput.addEventListener('input', function () {
        localStorage.setItem('totalBP', totalBPInput.value);
      });

      resetBtn.addEventListener('click', function () {
        tables.forEach(table => {
          table.querySelectorAll('tbody tr').forEach((row, index) => {
            const checkbox = row.querySelector('input[type="checkbox"]');
            checkbox.checked = false;
            row.classList.remove('checked');
            localStorage.setItem('checkbox_' + table.id + '_' + index, false);
          });
        });
      });
    };
  </script>
</body>
</html>

